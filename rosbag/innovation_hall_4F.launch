<launch>

  <arg name="file" default="innovation_hall_4F" />
  <arg name="speed" default="1" />
  <arg name="play_from" default="0.0" />
  <param name="/use_sim_time" value="true" />

  <arg name="baselink" default="base_link" />
  <arg name="lidarlink_front" default="velodyne_front" />
  <arg name="lidarlink_tilted" default="velodyne_tilted" />
  <arg name="imulink" default="imu" />


  <!-- Setup Extrinsic Parameter: front velodyne VLP-16 -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_lidarFront"
    args="-0.040 0.000 1.040 -0.05235 0.0000  0.00000 $(arg baselink) $(arg lidarlink_front)" />

  <!-- Setup Extrinsic Parameter: front velodyne VLP-16  -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_lidarTilted"
    args=" 0.050 0.000 0.860  0.00000 0.4293 -0.01745 $(arg baselink) $(arg lidarlink_tilted)" />

  <!-- Setup Extrinsic Parameter: Xsens IMU -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_imu"
    args="-0.050 0.000 0.350 0.000 0.000 0.000 $(arg baselink) $(arg imulink)" />

  <node pkg="tf2_ros" type="static_transform_publisher" name="map_to_odom"
    args="0 0 0 0 0 0 map odom" />

  <!-- From packet msg to PointCloud2 -->
  <group ns="$(arg lidarlink_front)">
    <include file="$(dirname)/VLP16_packet_to_pointcloud.launch" />
  </group>

  <!-- From packet msg to PointCloud2 -->
  <group ns="$(arg lidarlink_tilted)">
    <include file="$(dirname)/VLP16_packet_to_pointcloud.launch" />
  </group>

  <!-- Play ROSBAG -->
  <node pkg="rosbag" type="play" name="rosbag" output="screen"
    args="--clock -r $(arg speed) -s $(arg play_from) $(dirname)/dataset/$(arg file).bag" />

</launch>