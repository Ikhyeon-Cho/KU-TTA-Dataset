<launch>

  <!-- Rosbag Player Configuration -->
  <arg name="bagfile" default="urban_campus_small" />

  <param name="/use_sim_time" value="true" />
  <arg name="speed" default="1" />
  <arg name="play_from" default="0.0" />
  <arg name="baselink" default="base_link" />



  <!-- Setup Extrinsic Parameter: tilted velodyne VLP-16  -->
  <node pkg="tf2_ros" type="static_transform_publisher" name="base_to_lidarTilted"
    args="-0.05 0.000 0.592 0.00 0.2480 -0.02235 $(arg baselink) velodyne_tilted" />


  <!-- From packet msg to PointCloud2 in specified baselink frame -->
  <include file="$(find campus_dataset_player)/vlp16packet_to_pointcloud.launch" >
    <arg name="ns" value="velodyne_tilted" />
    <arg name="frame_id" value="$(arg baselink)" />
  </include>

  <!-- RViz -->
  <node pkg="rviz" type="rviz" name="rviz"
    args="-d $(find campus_dataset_player)/$(arg bagfile)/$(arg bagfile).rviz > /dev/null" />


  <!-- Play ROSBAG -->
  <node pkg="rosbag" type="play" name="rosbag" output="screen"
    args="--clock -r $(arg speed) -s $(arg play_from) $(find campus_dataset_player)/rosbag/$(arg bagfile).bag" />


  <!-- Extrinsic Parameter: tilted velodyne -->
    <!-- Translation: [ -0.05  0.00  0.592 ] -->
    <!-- Orientation(RPY): [ -0.02235  0.2480  0.00 ] -->

</launch>